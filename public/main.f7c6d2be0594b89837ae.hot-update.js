/*! For license information please see main.f7c6d2be0594b89837ae.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateportfolio_hursun_2("main",{"./app/components/canvas/home/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var r=s("./node_modules/three/build/three.module.js"),a=s("./node_modules/gsap/index.js"),i=s("./app/classes/Detection.js"),l=s("./node_modules/prefix/index.js"),o=s("./app/shaders/human/vertex.glsl"),n=s("./app/shaders/human/fragment.glsl"),h=s("./app/shaders/particle/vertex.glsl"),c=s("./app/shaders/particle/fragment.glsl");class d{constructor({scene:e,gltfLoader:t,camera:s,renderer:a}){this.scene=e,this.gltfLoader=t,this.camera=s,this.renderer=a,this.uniforms={time:{value:0},speed:{value:10},charSize:{value:{x:1,y:1}},charResolution:{value:10},color:{value:new r.Color("#D2001A")},resolution:{value:{x:2,y:2}}},this.scroll={target:0,current:0,limit:document.querySelector(".home__wrapper").clientHeight},this.y={start:0,distance:0,end:0},this.transformPrefix=l("transform"),this.group=new r.Group,this.scene.add(this.group),this.createObject(),this.createParticle()}updateAllMaterial(){this.scene.traverse((e=>{e instanceof r.Mesh&&e.material instanceof r.MeshStandardMaterial&&(e.material.needsUpdate=!0)}))}createObject(){this.cube=new r.Mesh(new r.BoxGeometry(1,1,1),new r.MeshBasicMaterial),this.cube.position.set(0,-18,0),this.material=new r.RawShaderMaterial({vertexShader:o.default,fragmentShader:n.default,uniforms:this.uniforms}),this.gltfLoader.load("models/human/scene.gltf",(e=>{this.model=e.scene,this.model.children[0].children[0].children.forEach((e=>{e.material=this.material})),this.model.position.y=-16,this.group.add(this.model),this.updateAllMaterial()}))}createParticle(){const e=new Float32Array(3e4);for(let t=0;t<1e4;t++){const s=3*t;e[s]=100*(Math.random()-.5),e[s+1]=100*Math.random(),e[s+2]=100*(Math.random()-.5)}const t=new r.BufferGeometry;t.setAttribute("position",new r.BufferAttribute(e,3)),this.particleMaterial=new r.RawShaderMaterial({fragmentShader:c.default,vertexShader:h.default,depthWrite:!1,blending:r.AdditiveBlending,uniforms:{uTime:{value:0},uSize:{value:10*this.renderer.getPixelRatio()}}}),this.particle=new r.Points(t,this.particleMaterial),this.particle.position.y=-35,this.group.add(this.particle)}onScroll({pixelY:e}){this.scroll.target+=e}onTouchStart(e){this.y.start=e.touches[0].clientY}onTouchMove(e){this.y.start>e.touches[0].clientY?this.y.distance+=100:this.y.distance-=100}update(e){i.default.isDesktop()?this.scroll.target=a.default.utils.clamp(0,this.scroll.limit,this.scroll.target):this.scroll.target=a.default.utils.clamp(0,this.scroll.limit,this.y.distance),this.scroll.target<1&&(this.scroll.target=0),this.y.distance<.01&&(this.y.distance=0),this.scroll.current=a.default.utils.interpolate(this.scroll.current,this.scroll.target,.01),this.head&&(this.head.rotation.y=e),this.particleMaterial&&(this.particleMaterial.uniforms.uTime.value=e),this.scroll.current<4600?(this.camera.rotation.x=1e-4*this.scroll.current,this.camera.rotation.y=.001*this.scroll.current,this.camera.position.z=5*Math.cos(.001*this.scroll.current),this.camera.position.y=.003*-this.scroll.current,this.camera.position.x=5*Math.sin(.001*this.scroll.current),document.querySelector(".home__end").classList.remove("active")):(a.default.to(this.camera.position,{x:0,y:-6,z:15,duration:6,ease:"expo.out"}),a.default.to(this.camera.rotation,{x:0,y:0,z:0,duration:1}),document.querySelector(".home__end").classList.add("active")),this.uniforms.time.value=e}destroy(){this.scene.remove(this.group)}}}},(function(e){e.h=()=>"de926409f114559fd2dd"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTbEUsRUFBMEIsS0FBdEJQLEtBQUtZLE9BQU9FLFFBQ3JDZCxLQUFLRixPQUFPb0MsU0FBU3dDLEVBQTRDLEVBQXhDMUIsS0FBSzJCLElBQTBCLEtBQXRCM0UsS0FBS1ksT0FBT0UsU0FDOUNkLEtBQUtGLE9BQU9vQyxTQUFTM0IsRUFBMkIsTUFBdEJQLEtBQUtZLE9BQU9FLFFBQ3RDZCxLQUFLRixPQUFPb0MsU0FBUzVCLEVBQTRDLEVBQXhDMEMsS0FBSzRCLElBQTBCLEtBQXRCNUUsS0FBS1ksT0FBT0UsU0FDOUNFLFNBQVNDLGNBQWMsY0FBYzRELFVBQVVDLE9BQU8sWUFFdERQLEVBQUFBLFFBQUFBLEdBQVF2RSxLQUFLRixPQUFPb0MsU0FBVSxDQUMxQjVCLEVBQUcsRUFDSEMsR0FBSSxFQUNKbUUsRUFBRyxHQUNISyxTQUFVLEVBQ1ZDLEtBQU0sYUFFVlQsRUFBQUEsUUFBQUEsR0FBUXZFLEtBQUtGLE9BQU8yRSxTQUFVLENBQzFCbkUsRUFBRyxFQUNIQyxFQUFHLEVBQ0htRSxFQUFHLEVBQ0hLLFNBQVUsSUFHZC9ELFNBQVNDLGNBQWMsY0FBYzRELFVBQVVwRCxJQUFJLFdBR3ZEekIsS0FBS0MsU0FBU0MsS0FBS0MsTUFBUWtFLENBQzlCLENBRURZLFVBQ0lqRixLQUFLSixNQUFNa0YsT0FBTzlFLEtBQUt3QixNQUMxQixrQkMzS0wwRCxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9ydGZvbGlvLWh1cnN1bi0yLy4vYXBwL2NvbXBvbmVudHMvY2FudmFzL2hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcG9ydGZvbGlvLWh1cnN1bi0yL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSdcclxuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcclxuaW1wb3J0IERldGVjdGlvbk1hbmFnZXIgZnJvbSAnLi4vLi4vLi4vY2xhc3Nlcy9EZXRlY3Rpb24uanMnXHJcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4J1xyXG5cclxuaW1wb3J0IHZlcnRleFNoYWRlciBmcm9tICcuLi8uLi8uLi9zaGFkZXJzL2h1bWFuL3ZlcnRleC5nbHNsJ1xyXG5pbXBvcnQgZnJhZ21lbnRTaGFkZXIgZnJvbSAnLi4vLi4vLi4vc2hhZGVycy9odW1hbi9mcmFnbWVudC5nbHNsJ1xyXG5cclxuaW1wb3J0IHZlcnRleFNoYWRlclBhcnRpY2xlIGZyb20gJy4uLy4uLy4uL3NoYWRlcnMvcGFydGljbGUvdmVydGV4Lmdsc2wnXHJcbmltcG9ydCBmcmFnbWVudFNoYWRlclBhcnRpY2xlIGZyb20gJy4uLy4uLy4uL3NoYWRlcnMvcGFydGljbGUvZnJhZ21lbnQuZ2xzbCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWUge1xyXG4gICAgY29uc3RydWN0b3IoeyBzY2VuZSwgZ2x0ZkxvYWRlciwgY2FtZXJhLCByZW5kZXJlciB9KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lXHJcbiAgICAgICAgdGhpcy5nbHRmTG9hZGVyID0gZ2x0ZkxvYWRlclxyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyXHJcblxyXG4gICAgICAgIHRoaXMudW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgIHRpbWU6IHsgdmFsdWU6IDAuMCB9LFxyXG4gICAgICAgICAgICBzcGVlZDogeyB2YWx1ZTogMTAuMCB9LFxyXG4gICAgICAgICAgICBjaGFyU2l6ZTogeyB2YWx1ZTogeyB4OiAxLjAsIHk6IDEuMCB9IH0sXHJcbiAgICAgICAgICAgIGNoYXJSZXNvbHV0aW9uOiB7IHZhbHVlOiAxMCB9LFxyXG4gICAgICAgICAgICBjb2xvcjogeyB2YWx1ZTogbmV3IFRIUkVFLkNvbG9yKCcjRDIwMDFBJykgfSxcclxuICAgICAgICAgICAgcmVzb2x1dGlvbjogeyB2YWx1ZTogeyB4OiAyLjAsIHk6IDIuMCB9IH0sXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbCA9IHtcclxuICAgICAgICAgICAgdGFyZ2V0OiAwLFxyXG4gICAgICAgICAgICBjdXJyZW50OiAwLFxyXG4gICAgICAgICAgICBsaW1pdDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX3dyYXBwZXInKS5jbGllbnRIZWlnaHQsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnkgPSB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxyXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgZW5kOiAwLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRyYW5zZm9ybVByZWZpeCA9IFByZWZpeCgndHJhbnNmb3JtJylcclxuICAgICAgICB0aGlzLmdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKClcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmdyb3VwKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlT2JqZWN0KClcclxuICAgICAgICB0aGlzLmNyZWF0ZVBhcnRpY2xlKClcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVBbGxNYXRlcmlhbCgpIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnRyYXZlcnNlKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2ggJiZcclxuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWxcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlT2JqZWN0KCkge1xyXG4gICAgICAgIHRoaXMuY3ViZSA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxLCAxLCAxKSwgbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCkpXHJcbiAgICAgICAgdGhpcy5jdWJlLnBvc2l0aW9uLnNldCgwLCAtMTgsIDApXHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlcixcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXIsXHJcbiAgICAgICAgICAgIHVuaWZvcm1zOiB0aGlzLnVuaWZvcm1zLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5nbHRmTG9hZGVyLmxvYWQoJ21vZGVscy9odW1hbi9zY2VuZS5nbHRmJywgKGdsdGYpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IGdsdGYuc2NlbmVcclxuXHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnBvc2l0aW9uLnkgPSAtMTZcclxuICAgICAgICAgICAgdGhpcy5ncm91cC5hZGQodGhpcy5tb2RlbClcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxNYXRlcmlhbCgpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVQYXJ0aWNsZSgpIHtcclxuICAgICAgICBjb25zdCBjb3VudCA9IDEwMDAwXHJcbiAgICAgICAgY29uc3QgcmFkaXVzID0gMTAwXHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShjb3VudCAqIDMpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGkzID0gaSAqIDNcclxuICAgICAgICAgICAgcG9zaXRpb25zW2kzXSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHJhZGl1c1xyXG4gICAgICAgICAgICBwb3NpdGlvbnNbaTMgKyAxXSA9IE1hdGgucmFuZG9tKCkgKiByYWRpdXNcclxuICAgICAgICAgICAgcG9zaXRpb25zW2kzICsgMl0gPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiByYWRpdXNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KClcclxuICAgICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnMsIDMpKVxyXG5cclxuICAgICAgICB0aGlzLnBhcnRpY2xlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuUmF3U2hhZGVyTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICBmcmFnbWVudFNoYWRlcjogZnJhZ21lbnRTaGFkZXJQYXJ0aWNsZSxcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyOiB2ZXJ0ZXhTaGFkZXJQYXJ0aWNsZSxcclxuICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLFxyXG4gICAgICAgICAgICB1bmlmb3Jtczoge1xyXG4gICAgICAgICAgICAgICAgdVRpbWU6IHsgdmFsdWU6IDAgfSxcclxuICAgICAgICAgICAgICAgIHVTaXplOiB7IHZhbHVlOiAxMCAqIHRoaXMucmVuZGVyZXIuZ2V0UGl4ZWxSYXRpbygpIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZSA9IG5ldyBUSFJFRS5Qb2ludHMoZ2VvbWV0cnksIHRoaXMucGFydGljbGVNYXRlcmlhbClcclxuICAgICAgICB0aGlzLnBhcnRpY2xlLnBvc2l0aW9uLnkgPSAtMzVcclxuICAgICAgICB0aGlzLmdyb3VwLmFkZCh0aGlzLnBhcnRpY2xlKVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2Nyb2xsKHsgcGl4ZWxZIH0pIHtcclxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZXHJcbiAgICB9XHJcblxyXG4gICAgb25Ub3VjaFN0YXJ0KGUpIHtcclxuICAgICAgICB0aGlzLnkuc3RhcnQgPSBlLnRvdWNoZXNbMF0uY2xpZW50WVxyXG4gICAgfVxyXG5cclxuICAgIG9uVG91Y2hNb3ZlKGUpIHtcclxuICAgICAgICBpZiAodGhpcy55LnN0YXJ0ID4gZS50b3VjaGVzWzBdLmNsaWVudFkpIHtcclxuICAgICAgICAgICAgdGhpcy55LmRpc3RhbmNlICs9IDEwMFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMueS5kaXN0YW5jZSAtPSAxMDBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGVsYXBzZWRUaW1lKSB7XHJcbiAgICAgICAgaWYgKERldGVjdGlvbk1hbmFnZXIuaXNEZXNrdG9wKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gR1NBUC51dGlscy5jbGFtcCgwLCB0aGlzLnNjcm9sbC5saW1pdCwgdGhpcy5zY3JvbGwudGFyZ2V0KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoMCwgdGhpcy5zY3JvbGwubGltaXQsIHRoaXMueS5kaXN0YW5jZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbC50YXJnZXQgPCAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IDBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMueS5kaXN0YW5jZSA8IDAuMDEpIHtcclxuICAgICAgICAgICAgdGhpcy55LmRpc3RhbmNlID0gMFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5zY3JvbGwudGFyZ2V0LCAwLjAxKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5oZWFkKSB0aGlzLmhlYWQucm90YXRpb24ueSA9IGVsYXBzZWRUaW1lXHJcbiAgICAgICAgaWYgKHRoaXMucGFydGljbGVNYXRlcmlhbCkgdGhpcy5wYXJ0aWNsZU1hdGVyaWFsLnVuaWZvcm1zLnVUaW1lLnZhbHVlID0gZWxhcHNlZFRpbWVcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPCA0NjAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0aW9uLnggPSB0aGlzLnNjcm9sbC5jdXJyZW50ICogMC4wMDAxXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0aW9uLnkgPSB0aGlzLnNjcm9sbC5jdXJyZW50ICogMC4wMDFcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9IE1hdGguY29zKHRoaXMuc2Nyb2xsLmN1cnJlbnQgKiAwLjAwMSkgKiA1XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnkgPSAtdGhpcy5zY3JvbGwuY3VycmVudCAqIDAuMDAzXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnggPSBNYXRoLnNpbih0aGlzLnNjcm9sbC5jdXJyZW50ICogMC4wMDEpICogNVxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fZW5kJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBHU0FQLnRvKHRoaXMuY2FtZXJhLnBvc2l0aW9uLCB7XHJcbiAgICAgICAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgICAgICAgeTogLTYsXHJcbiAgICAgICAgICAgICAgICB6OiAxNSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA2LFxyXG4gICAgICAgICAgICAgICAgZWFzZTogJ2V4cG8ub3V0JyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgR1NBUC50byh0aGlzLmNhbWVyYS5yb3RhdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgICAgICB6OiAwLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDEsXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fZW5kJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudW5pZm9ybXMudGltZS52YWx1ZSA9IGVsYXBzZWRUaW1lXHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLmdyb3VwKVxyXG4gICAgfVxyXG59XHJcbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcImRlOTI2NDA5ZjExNDU1OWZkMmRkXCIpIl0sIm5hbWVzIjpbIkhvbWUiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwiZ2x0ZkxvYWRlciIsImNhbWVyYSIsInJlbmRlcmVyIiwidGhpcyIsInVuaWZvcm1zIiwidGltZSIsInZhbHVlIiwic3BlZWQiLCJjaGFyU2l6ZSIsIngiLCJ5IiwiY2hhclJlc29sdXRpb24iLCJjb2xvciIsIlRIUkVFIiwicmVzb2x1dGlvbiIsInNjcm9sbCIsInRhcmdldCIsImN1cnJlbnQiLCJsaW1pdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsaWVudEhlaWdodCIsInN0YXJ0IiwiZGlzdGFuY2UiLCJlbmQiLCJ0cmFuc2Zvcm1QcmVmaXgiLCJQcmVmaXgiLCJncm91cCIsImFkZCIsImNyZWF0ZU9iamVjdCIsImNyZWF0ZVBhcnRpY2xlIiwidXBkYXRlQWxsTWF0ZXJpYWwiLCJ0cmF2ZXJzZSIsImNoaWxkIiwibWF0ZXJpYWwiLCJuZWVkc1VwZGF0ZSIsImN1YmUiLCJwb3NpdGlvbiIsInNldCIsInZlcnRleFNoYWRlciIsImZyYWdtZW50U2hhZGVyIiwibG9hZCIsImdsdGYiLCJtb2RlbCIsImNoaWxkcmVuIiwiZm9yRWFjaCIsInBvc2l0aW9ucyIsIkZsb2F0MzJBcnJheSIsImNvdW50IiwiaSIsImkzIiwiTWF0aCIsInJhbmRvbSIsImdlb21ldHJ5Iiwic2V0QXR0cmlidXRlIiwicGFydGljbGVNYXRlcmlhbCIsImZyYWdtZW50U2hhZGVyUGFydGljbGUiLCJ2ZXJ0ZXhTaGFkZXJQYXJ0aWNsZSIsImRlcHRoV3JpdGUiLCJibGVuZGluZyIsInVUaW1lIiwidVNpemUiLCJnZXRQaXhlbFJhdGlvIiwicGFydGljbGUiLCJvblNjcm9sbCIsInBpeGVsWSIsIm9uVG91Y2hTdGFydCIsImUiLCJ0b3VjaGVzIiwiY2xpZW50WSIsIm9uVG91Y2hNb3ZlIiwidXBkYXRlIiwiZWxhcHNlZFRpbWUiLCJEZXRlY3Rpb25NYW5hZ2VyIiwiR1NBUCIsImhlYWQiLCJyb3RhdGlvbiIsInoiLCJjb3MiLCJzaW4iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkdXJhdGlvbiIsImVhc2UiLCJkZXN0cm95IiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9