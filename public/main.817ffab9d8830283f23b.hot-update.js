/*! For license information please see main.817ffab9d8830283f23b.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateportfolio_hursun_2("main",{"./app/classes/Page.js":(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var s=i("./node_modules/lodash/each.js"),n=i("./node_modules/gsap/index.js"),a=i("./node_modules/prefix/index.js"),l=i("./app/classes/AsyncLoad.js"),r=i("./app/animations/Title.js"),o=i("./app/animations/Paragraph.js"),h=i("./app/animations/Highlight.js");class m{constructor({element:e,id:t,elements:i}){this.selector=e,this.selectorChildren={...i,loadScreen:document.querySelector(".load__screen"),loadScreenImg:document.querySelector(".load__screen__img"),animationTitles:'[data-animation="title"]',animationParagraph:'[data-animation="paragraph"]',animationHighlight:'[data-animation="highlight"]',preloaders:"[data-src]"},this.id=t,this.scroll={current:0,target:0,limit:0},this.mouse={x:0,y:0},this.transformPrefix=a("transform")}create(){this.element=document.querySelector(this.selector),this.elements={},s(this.selectorChildren,((e,t)=>{e instanceof window.HTMLElement||e instanceof window.NodeList||Array.isArray(e)?this.elements[t]=e:(this.elements[t]=this.element.querySelectorAll(e),0===this.elements[t].length?this.elements[t]=null:1===this.elements[t].length&&(this.elements[t]=this.element.querySelector(e)))})),this.elements.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight),this.createAnimation(),this.createAudio(),this.createAsyncLoad(),"home"===this.id&&this.createPoints(),"gallery"===this.id&&this.createScrollGsap(),"spotify"===this.id&&this.playHandle()}createAnimation(){s(this.elements.animationTitles,(e=>{new r.default({element:e})})),s(this.elements.animationParagraph,(e=>{new o.default({element:e})})),s(this.elements.animationHighlight,(e=>{new h.default({element:e})}))}createAudio(){this.sideAudio=new Audio("/Audio/mixkit-interface-hint-notification-911.wav"),this.sideAudio.volume=1,this.elements.loadScreen.addEventListener("click",(()=>{this.sideAudio.play()}))}createAsyncLoad(){s(this.elements.preloaders,(e=>{new l.default({element:e.target?e.target:e})}))}show(){return new Promise((e=>{this.animationOut=n.default.timeline(),this.animationOut.set(this.elements.loadScreen,{left:"-200%"}),this.animationOut.call((()=>{e()}))}))}hide(){return new Promise((e=>{this.animationIn=n.default.timeline(),this.animationIn.set(this.elements.loadScreen,{autoAlpha:1}),this.animationIn.set(this.elements.loadScreenImg,{autoAlpha:1}),this.animationIn.to(this.elements.loadScreen,{duration:1,width:"100%",left:"0%",ease:"Expo.easeInOut"}),this.animationIn.to(this.elements.loadScreen,{duration:2,width:"100%",left:"100%",ease:"Expo.easeInOut"})}))}onResize(){console.log(this.scroll.limit),this.elements?.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight)}onScroll(e){this.scroll.target+=e.pixelY,this.scroll.target%800==0&&this.sideAudio.play()}onMousemove(e){this.mouse.x=.01*(e.clientX-window.innerWidth)+5,this.mouse.y=.01*(e.clientY-window.innerHeight)+5}onTouchMove(){}onTouchStart(){}onTouchEnd(){}update(){this.scroll.target=n.default.utils.clamp(0,this.scroll.limit,this.scroll.target),this.scroll.current<.01&&(this.scroll.current=0),this.scroll.current=n.default.utils.interpolate(this.scroll.current,this.scroll.target,.01),this.elements?.wrapper&&(this.elements.wrapper.style[this.transformPrefix]=`translate3d(0px,-${this.scroll.current}px, 0px)`),this.elements?.bar&&s(this.elements.bar,(e=>{e.style.transform=`translateX(-${this.scroll.current}px)`})),this.elements.points&&s(this.elements.points,((e,t)=>{e.style.transform=`translateX(${this.mouse.x*(t+1)}px) translateY(${this.mouse.y*(t+1)}px)`}))}}}},(function(e){e.h=()=>"adb9dbd4a25b9510148e"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UytCLFFBQVErQyxNQUNsQjdFLEtBQUtrQixpQkFDSixvQkFBbUJsQixLQUFLVyxPQUFPQyxtQkFHcENaLEtBQUtELFVBQVUrRSxLQUNmekQsRUFBS3JCLEtBQUtELFNBQVMrRSxLQUFNakYsSUFDckJBLEVBQVFnRixNQUFNRSxVQUFhLGVBQWMvRSxLQUFLVyxPQUFPQyxZQUFyRCxJQUlKWixLQUFLRCxTQUFTaUYsUUFDZDNELEVBQUtyQixLQUFLRCxTQUFTaUYsUUFBUSxDQUFDQyxFQUFPQyxLQUMvQkQsRUFBTUosTUFBTUUsVUFBYSxjQUFhL0UsS0FBS2UsTUFBTUMsR0FBS2tFLEVBQVEsb0JBQzFEbEYsS0FBS2UsTUFBTUUsR0FBS2lFLEVBQVEsT0FENUIsR0FLWCxrQkMzTExDLEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb3J0Zm9saW8taHVyc3VuLTIvLi9hcHAvY2xhc3Nlcy9QYWdlLmpzIiwid2VicGFjazovL3BvcnRmb2xpby1odXJzdW4tMi93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGVhY2ggZnJvbSAnbG9kYXNoL2VhY2guanMnXHJcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXHJcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4J1xyXG5cclxuaW1wb3J0IEFzeW5jTG9hZCBmcm9tICcuL0FzeW5jTG9hZC5qcydcclxuaW1wb3J0IEFuaW1hdGlvblRpdGxlIGZyb20gJy4uL2FuaW1hdGlvbnMvVGl0bGUuanMnXHJcbmltcG9ydCBBbmltYXRpb25QYXJhZ3JhcGggZnJvbSAnLi4vYW5pbWF0aW9ucy9QYXJhZ3JhcGguanMnXHJcbmltcG9ydCBBbmltYXRpb25IaWdobGlnaHQgZnJvbSAnLi4vYW5pbWF0aW9ucy9IaWdobGlnaHQuanMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgZWxlbWVudCwgaWQsIGVsZW1lbnRzIH0pIHtcclxuICAgICAgICB0aGlzLnNlbGVjdG9yID0gZWxlbWVudFxyXG4gICAgICAgIHRoaXMuc2VsZWN0b3JDaGlsZHJlbiA9IHtcclxuICAgICAgICAgICAgLi4uZWxlbWVudHMsXHJcbiAgICAgICAgICAgIGxvYWRTY3JlZW46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkX19zY3JlZW4nKSxcclxuICAgICAgICAgICAgbG9hZFNjcmVlbkltZzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRfX3NjcmVlbl9faW1nJyksXHJcbiAgICAgICAgICAgIGFuaW1hdGlvblRpdGxlczogJ1tkYXRhLWFuaW1hdGlvbj1cInRpdGxlXCJdJyxcclxuICAgICAgICAgICAgYW5pbWF0aW9uUGFyYWdyYXBoOiAnW2RhdGEtYW5pbWF0aW9uPVwicGFyYWdyYXBoXCJdJyxcclxuICAgICAgICAgICAgYW5pbWF0aW9uSGlnaGxpZ2h0OiAnW2RhdGEtYW5pbWF0aW9uPVwiaGlnaGxpZ2h0XCJdJyxcclxuICAgICAgICAgICAgcHJlbG9hZGVyczogJ1tkYXRhLXNyY10nLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkID0gaWRcclxuICAgICAgICB0aGlzLnNjcm9sbCA9IHtcclxuICAgICAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICAgICAgdGFyZ2V0OiAwLFxyXG4gICAgICAgICAgICBsaW1pdDogMCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubW91c2UgPSB7XHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRyYW5zZm9ybVByZWZpeCA9IFByZWZpeCgndHJhbnNmb3JtJylcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNlbGVjdG9yKVxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSB7fVxyXG5cclxuICAgICAgICBlYWNoKHRoaXMuc2VsZWN0b3JDaGlsZHJlbiwgKHNlbGVjdG9yLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3IgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEVsZW1lbnQgfHxcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yIGluc3RhbmNlb2Ygd2luZG93Lk5vZGVMaXN0IHx8XHJcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHNlbGVjdG9yKVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNba2V5XSA9IHNlbGVjdG9yXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRzW2tleV0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1trZXldID0gbnVsbFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnRzW2tleV0ubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1trZXldID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwubGltaXQgPSB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZUFuaW1hdGlvbigpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVBdWRpbygpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVBc3luY0xvYWQoKVxyXG4gICAgICAgIGlmICh0aGlzLmlkID09PSAnaG9tZScpIHRoaXMuY3JlYXRlUG9pbnRzKClcclxuICAgICAgICBpZiAodGhpcy5pZCA9PT0gJ2dhbGxlcnknKSB0aGlzLmNyZWF0ZVNjcm9sbEdzYXAoKVxyXG4gICAgICAgIGlmICh0aGlzLmlkID09PSAnc3BvdGlmeScpIHRoaXMucGxheUhhbmRsZSgpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQW5pbWF0aW9uKCkge1xyXG4gICAgICAgIGVhY2godGhpcy5lbGVtZW50cy5hbmltYXRpb25UaXRsZXMsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBBbmltYXRpb25UaXRsZSh7IGVsZW1lbnQgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBlYWNoKHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uUGFyYWdyYXBoLCAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgQW5pbWF0aW9uUGFyYWdyYXBoKHsgZWxlbWVudCB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGVhY2godGhpcy5lbGVtZW50cy5hbmltYXRpb25IaWdobGlnaHQsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBBbmltYXRpb25IaWdobGlnaHQoeyBlbGVtZW50IH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVBdWRpbygpIHtcclxuICAgICAgICB0aGlzLnNpZGVBdWRpbyA9IG5ldyBBdWRpbygnL0F1ZGlvL21peGtpdC1pbnRlcmZhY2UtaGludC1ub3RpZmljYXRpb24tOTExLndhdicpXHJcbiAgICAgICAgdGhpcy5zaWRlQXVkaW8udm9sdW1lID0gMVxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMubG9hZFNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zaWRlQXVkaW8ucGxheSgpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVBc3luY0xvYWQoKSB7XHJcbiAgICAgICAgZWFjaCh0aGlzLmVsZW1lbnRzLnByZWxvYWRlcnMsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBBc3luY0xvYWQoeyBlbGVtZW50OiBlbGVtZW50LnRhcmdldCA/IGVsZW1lbnQudGFyZ2V0IDogZWxlbWVudCB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25PdXQgPSBHU0FQLnRpbWVsaW5lKClcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uT3V0LnNldCh0aGlzLmVsZW1lbnRzLmxvYWRTY3JlZW4sIHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6ICctMjAwJScsXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk91dC5jYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25JbiA9IEdTQVAudGltZWxpbmUoKVxyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkluLnNldCh0aGlzLmVsZW1lbnRzLmxvYWRTY3JlZW4sIHtcclxuICAgICAgICAgICAgICAgIGF1dG9BbHBoYTogMSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25Jbi5zZXQodGhpcy5lbGVtZW50cy5sb2FkU2NyZWVuSW1nLCB7XHJcbiAgICAgICAgICAgICAgICBhdXRvQWxwaGE6IDEsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSW4udG8odGhpcy5lbGVtZW50cy5sb2FkU2NyZWVuLCB7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAnMCUnLFxyXG4gICAgICAgICAgICAgICAgZWFzZTogJ0V4cG8uZWFzZUluT3V0JyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25Jbi50byh0aGlzLmVsZW1lbnRzLmxvYWRTY3JlZW4sIHtcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgIGxlZnQ6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgIGVhc2U6ICdFeHBvLmVhc2VJbk91dCcsXHJcbiAgICAgICAgICAgICAgICAvLyBkZWxheTogLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemUoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zY3JvbGwubGltaXQpXHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHM/LndyYXBwZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwubGltaXQgPSB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2Nyb2xsKGUpIHtcclxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgKz0gZS5waXhlbFlcclxuICAgICAgICBpZiAodGhpcy5zY3JvbGwudGFyZ2V0ICUgODAwID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zaWRlQXVkaW8ucGxheSgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2Vtb3ZlKGUpIHtcclxuICAgICAgICB0aGlzLm1vdXNlLnggPSAoZS5jbGllbnRYIC0gd2luZG93LmlubmVyV2lkdGgpICogMC4wMSArIDVcclxuICAgICAgICB0aGlzLm1vdXNlLnkgPSAoZS5jbGllbnRZIC0gd2luZG93LmlubmVySGVpZ2h0KSAqIDAuMDEgKyA1XHJcbiAgICB9XHJcblxyXG4gICAgb25Ub3VjaE1vdmUoKSB7fVxyXG5cclxuICAgIG9uVG91Y2hTdGFydCgpIHt9XHJcblxyXG4gICAgb25Ub3VjaEVuZCgpIHt9XHJcblxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoMCwgdGhpcy5zY3JvbGwubGltaXQsIHRoaXMuc2Nyb2xsLnRhcmdldClcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPCAwLjAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSAwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc2Nyb2xsLmN1cnJlbnQsIHRoaXMuc2Nyb2xsLnRhcmdldCwgMC4wMSlcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHM/LndyYXBwZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnN0eWxlW1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1QcmVmaXhcclxuICAgICAgICAgICAgXSA9IGB0cmFuc2xhdGUzZCgwcHgsLSR7dGhpcy5zY3JvbGwuY3VycmVudH1weCwgMHB4KWBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzPy5iYXIpIHtcclxuICAgICAgICAgICAgZWFjaCh0aGlzLmVsZW1lbnRzLmJhciwgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7dGhpcy5zY3JvbGwuY3VycmVudH1weClgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cy5wb2ludHMpIHtcclxuICAgICAgICAgICAgZWFjaCh0aGlzLmVsZW1lbnRzLnBvaW50cywgKHBvaW50LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcG9pbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHt0aGlzLm1vdXNlLnggKiAoaW5kZXggKyAxKX1weCkgdHJhbnNsYXRlWSgke1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW91c2UueSAqIChpbmRleCArIDEpXHJcbiAgICAgICAgICAgICAgICB9cHgpYFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJhZGI5ZGJkNGEyNWI5NTEwMTQ4ZVwiKSJdLCJuYW1lcyI6WyJQYWdlIiwiY29uc3RydWN0b3IiLCJlbGVtZW50IiwiaWQiLCJlbGVtZW50cyIsInRoaXMiLCJzZWxlY3RvciIsInNlbGVjdG9yQ2hpbGRyZW4iLCJsb2FkU2NyZWVuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibG9hZFNjcmVlbkltZyIsImFuaW1hdGlvblRpdGxlcyIsImFuaW1hdGlvblBhcmFncmFwaCIsImFuaW1hdGlvbkhpZ2hsaWdodCIsInByZWxvYWRlcnMiLCJzY3JvbGwiLCJjdXJyZW50IiwidGFyZ2V0IiwibGltaXQiLCJtb3VzZSIsIngiLCJ5IiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiY3JlYXRlIiwiZWFjaCIsImtleSIsIndpbmRvdyIsIkhUTUxFbGVtZW50IiwiTm9kZUxpc3QiLCJBcnJheSIsImlzQXJyYXkiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwid3JhcHBlciIsImNsaWVudEhlaWdodCIsImlubmVySGVpZ2h0IiwiY3JlYXRlQW5pbWF0aW9uIiwiY3JlYXRlQXVkaW8iLCJjcmVhdGVBc3luY0xvYWQiLCJjcmVhdGVQb2ludHMiLCJjcmVhdGVTY3JvbGxHc2FwIiwicGxheUhhbmRsZSIsIkFuaW1hdGlvblRpdGxlIiwiQW5pbWF0aW9uUGFyYWdyYXBoIiwiQW5pbWF0aW9uSGlnaGxpZ2h0Iiwic2lkZUF1ZGlvIiwiQXVkaW8iLCJ2b2x1bWUiLCJhZGRFdmVudExpc3RlbmVyIiwicGxheSIsIkFzeW5jTG9hZCIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImFuaW1hdGlvbk91dCIsIkdTQVAiLCJzZXQiLCJsZWZ0IiwiY2FsbCIsImhpZGUiLCJhbmltYXRpb25JbiIsImF1dG9BbHBoYSIsInRvIiwiZHVyYXRpb24iLCJ3aWR0aCIsImVhc2UiLCJvblJlc2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJvblNjcm9sbCIsImUiLCJwaXhlbFkiLCJvbk1vdXNlbW92ZSIsImNsaWVudFgiLCJpbm5lcldpZHRoIiwiY2xpZW50WSIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaFN0YXJ0Iiwib25Ub3VjaEVuZCIsInVwZGF0ZSIsInN0eWxlIiwiYmFyIiwidHJhbnNmb3JtIiwicG9pbnRzIiwicG9pbnQiLCJpbmRleCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==