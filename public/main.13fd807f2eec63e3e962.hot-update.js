/*! For license information please see main.13fd807f2eec63e3e962.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateportfolio_hursun_2("main",{"./app/classes/Page.js":(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var s=i("./node_modules/lodash/each.js"),n=i("./node_modules/gsap/index.js"),a=i("./node_modules/prefix/index.js"),l=i("./app/classes/AsyncLoad.js"),r=i("./app/animations/Title.js"),o=i("./app/animations/Paragraph.js"),h=i("./app/animations/Highlight.js"),c=i("./app/classes/Detection.js");class m{constructor({element:e,id:t,elements:i}){this.selector=e,this.selectorChildren={...i,loadScreen:document.querySelector(".load__screen"),loadScreenImg:document.querySelector(".load__screen__img"),animationTitles:'[data-animation="title"]',animationParagraph:'[data-animation="paragraph"]',animationHighlight:'[data-animation="highlight"]',preloaders:"[data-src]"},this.id=t,this.scroll={current:0,target:0,limit:0},this.mouse={x:0,y:0},this.y={start:0,distance:0,end:0},this.transformPrefix=a("transform")}create(){this.element=document.querySelector(this.selector),this.elements={},s(this.selectorChildren,((e,t)=>{e instanceof window.HTMLElement||e instanceof window.NodeList||Array.isArray(e)?this.elements[t]=e:(this.elements[t]=this.element.querySelectorAll(e),0===this.elements[t].length?this.elements[t]=null:1===this.elements[t].length&&(this.elements[t]=this.element.querySelector(e)))})),this.elements.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight),this.createAnimation(),this.createAudio(),this.createAsyncLoad(),"home"===this.id&&this.createPoints(),"gallery"===this.id&&this.createScrollGsap(),"spotify"===this.id&&this.playHandle()}createAnimation(){s(this.elements.animationTitles,(e=>{new r.default({element:e})})),s(this.elements.animationParagraph,(e=>{new o.default({element:e})})),s(this.elements.animationHighlight,(e=>{new h.default({element:e})}))}createAudio(){this.sideAudio=new Audio("/Audio/mixkit-interface-hint-notification-911.wav"),this.sideAudio.volume=1,this.elements.loadScreen.addEventListener("click",(()=>{this.sideAudio.play()}))}createAsyncLoad(){s(this.elements.preloaders,(e=>{new l.default({element:e.target?e.target:e})}))}show(){return new Promise((e=>{this.animationOut=n.default.timeline(),this.animationOut.set(this.elements.loadScreen,{left:"-200%"}),this.animationOut.call((()=>{e()}))}))}hide(){return new Promise((e=>{this.animationIn=n.default.timeline(),this.animationIn.set(this.elements.loadScreen,{autoAlpha:1}),this.animationIn.set(this.elements.loadScreenImg,{autoAlpha:1}),this.animationIn.to(this.elements.loadScreen,{duration:1,width:"100%",left:"0%",ease:"Expo.easeInOut"}),this.animationIn.to(this.elements.loadScreen,{duration:2,width:"100%",left:"100%",ease:"Expo.easeInOut"})}))}onResize(){this.elements?.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight)}onScroll(e){this.scroll.target+=e.pixelY,this.scroll.target%800==0&&this.sideAudio.play()}onMousemove(e){this.mouse.x=.01*(e.clientX-window.innerWidth)+5,this.mouse.y=.01*(e.clientY-window.innerHeight)+5}onTouchStart(e){this.y.start=e.touches[0].clientY}onTouchMove(e){this.y.start>e.touches[0].clientY?this.y.distance+=50:this.y.distance-=100}onTouchEnd(e){}update(){console.log(this.scroll.target),c.default.isDesktop()?this.scroll.target=n.default.utils.clamp(0,this.scroll.limit,this.scroll.target):this.scroll.target=n.default.utils.clamp(0,this.scroll.limit,this.y.distance),this.scroll.current<.01&&(this.scroll.current=0),this.y.distance<.01&&(this.y.distance=0),this.scroll.current=n.default.utils.interpolate(this.scroll.current,this.scroll.target,.01),this.elements?.wrapper&&(this.elements.wrapper.style[this.transformPrefix]=`translate3d(0px,-${this.scroll.current}px, 0px)`),this.elements?.bar&&s(this.elements.bar,(e=>{e.style.transform=`translateX(-${this.scroll.current}px)`})),this.elements.points&&s(this.elements.points,((e,t)=>{e.style.transform=`translateX(${this.mouse.x*(t+1)}px) translateY(${this.mouse.y*(t+1)}px)`}))}addEventListener(){}removeEventListeners(){}destroy(){this.removeEventListeners()}}}},(function(e){e.h=()=>"799355b68ffb9acdedd2"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEsUUFBQUEsTUFBQUEsTUFBaUIsRUFBR3ZELEtBQUtXLE9BQU9HLE1BQU9kLEtBQUtXLE9BQU9FLFFBRXhFYixLQUFLVyxPQUFPRSxPQUFTMEMsRUFBQUEsUUFBQUEsTUFBQUEsTUFBaUIsRUFBR3ZELEtBQUtXLE9BQU9HLE1BQU9kLEtBQUtpQixFQUFFRSxVQUduRW5CLEtBQUtXLE9BQU9DLFFBQVUsTUFDdEJaLEtBQUtXLE9BQU9DLFFBQVUsR0FHdEJaLEtBQUtpQixFQUFFRSxTQUFXLE1BQ2xCbkIsS0FBS2lCLEVBQUVFLFNBQVcsR0FHdEJuQixLQUFLVyxPQUFPQyxRQUFVMkMsRUFBQUEsUUFBQUEsTUFBQUEsWUFBdUJ2RCxLQUFLVyxPQUFPQyxRQUFTWixLQUFLVyxPQUFPRSxPQUFRLEtBRWxGYixLQUFLRCxVQUFVa0MsVUFDZmpDLEtBQUtELFNBQVNrQyxRQUFRaUQsTUFDbEJsRixLQUFLcUIsaUJBQ0osb0JBQW1CckIsS0FBS1csT0FBT0MsbUJBR3BDWixLQUFLRCxVQUFVb0YsS0FDZjNELEVBQUt4QixLQUFLRCxTQUFTb0YsS0FBTXRGLElBQ3JCQSxFQUFRcUYsTUFBTUUsVUFBYSxlQUFjcEYsS0FBS1csT0FBT0MsWUFBckQsSUFJSlosS0FBS0QsU0FBU3NGLFFBQ2Q3RCxFQUFLeEIsS0FBS0QsU0FBU3NGLFFBQVEsQ0FBQ0MsRUFBT0MsS0FDL0JELEVBQU1KLE1BQU1FLFVBQWEsY0FBYXBGLEtBQUtlLE1BQU1DLEdBQUt1RSxFQUFRLG9CQUMxRHZGLEtBQUtlLE1BQU1FLEdBQUtzRSxFQUFRLE9BRDVCLEdBS1gsQ0FFRHZDLG1CQUFxQixDQUNyQndDLHVCQUF5QixDQUV6QkMsVUFDSXpGLEtBQUt3RixzQkFDUixrQkM3TkxFLEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb3J0Zm9saW8taHVyc3VuLTIvLi9hcHAvY2xhc3Nlcy9QYWdlLmpzIiwid2VicGFjazovL3BvcnRmb2xpby1odXJzdW4tMi93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGVhY2ggZnJvbSAnbG9kYXNoL2VhY2guanMnXHJcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXHJcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4J1xyXG5cclxuaW1wb3J0IEFzeW5jTG9hZCBmcm9tICcuL0FzeW5jTG9hZC5qcydcclxuaW1wb3J0IEFuaW1hdGlvblRpdGxlIGZyb20gJy4uL2FuaW1hdGlvbnMvVGl0bGUuanMnXHJcbmltcG9ydCBBbmltYXRpb25QYXJhZ3JhcGggZnJvbSAnLi4vYW5pbWF0aW9ucy9QYXJhZ3JhcGguanMnXHJcbmltcG9ydCBBbmltYXRpb25IaWdobGlnaHQgZnJvbSAnLi4vYW5pbWF0aW9ucy9IaWdobGlnaHQuanMnXHJcbmltcG9ydCBEZXRlY3Rpb25NYW5hZ2VyIGZyb20gJy4uL2NsYXNzZXMvRGV0ZWN0aW9uLmpzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGVsZW1lbnQsIGlkLCBlbGVtZW50cyB9KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IGVsZW1lbnRcclxuICAgICAgICB0aGlzLnNlbGVjdG9yQ2hpbGRyZW4gPSB7XHJcbiAgICAgICAgICAgIC4uLmVsZW1lbnRzLFxyXG4gICAgICAgICAgICBsb2FkU2NyZWVuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZF9fc2NyZWVuJyksXHJcbiAgICAgICAgICAgIGxvYWRTY3JlZW5JbWc6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkX19zY3JlZW5fX2ltZycpLFxyXG4gICAgICAgICAgICBhbmltYXRpb25UaXRsZXM6ICdbZGF0YS1hbmltYXRpb249XCJ0aXRsZVwiXScsXHJcbiAgICAgICAgICAgIGFuaW1hdGlvblBhcmFncmFwaDogJ1tkYXRhLWFuaW1hdGlvbj1cInBhcmFncmFwaFwiXScsXHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkhpZ2hsaWdodDogJ1tkYXRhLWFuaW1hdGlvbj1cImhpZ2hsaWdodFwiXScsXHJcbiAgICAgICAgICAgIHByZWxvYWRlcnM6ICdbZGF0YS1zcmNdJyxcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkXHJcbiAgICAgICAgdGhpcy5zY3JvbGwgPSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgICAgICAgIHRhcmdldDogMCxcclxuICAgICAgICAgICAgbGltaXQ6IDAsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1vdXNlID0ge1xyXG4gICAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy55ID0ge1xyXG4gICAgICAgICAgICBzdGFydDogMCxcclxuICAgICAgICAgICAgZGlzdGFuY2U6IDAsXHJcbiAgICAgICAgICAgIGVuZDogMCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KCd0cmFuc2Zvcm0nKVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc2VsZWN0b3IpXHJcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IHt9XHJcblxyXG4gICAgICAgIGVhY2godGhpcy5zZWxlY3RvckNoaWxkcmVuLCAoc2VsZWN0b3IsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvciBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MRWxlbWVudCB8fFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3IgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZUxpc3QgfHxcclxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoc2VsZWN0b3IpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1trZXldID0gc2VsZWN0b3JcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNba2V5XSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudHNba2V5XS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSBudWxsXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudHNba2V5XS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMud3JhcHBlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbC5saW1pdCA9IHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGllbnRIZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlQW5pbWF0aW9uKClcclxuICAgICAgICB0aGlzLmNyZWF0ZUF1ZGlvKClcclxuICAgICAgICB0aGlzLmNyZWF0ZUFzeW5jTG9hZCgpXHJcbiAgICAgICAgaWYgKHRoaXMuaWQgPT09ICdob21lJykgdGhpcy5jcmVhdGVQb2ludHMoKVxyXG4gICAgICAgIGlmICh0aGlzLmlkID09PSAnZ2FsbGVyeScpIHRoaXMuY3JlYXRlU2Nyb2xsR3NhcCgpXHJcbiAgICAgICAgaWYgKHRoaXMuaWQgPT09ICdzcG90aWZ5JykgdGhpcy5wbGF5SGFuZGxlKClcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVBbmltYXRpb24oKSB7XHJcbiAgICAgICAgZWFjaCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvblRpdGxlcywgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgbmV3IEFuaW1hdGlvblRpdGxlKHsgZWxlbWVudCB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGVhY2godGhpcy5lbGVtZW50cy5hbmltYXRpb25QYXJhZ3JhcGgsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBBbmltYXRpb25QYXJhZ3JhcGgoeyBlbGVtZW50IH0pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZWFjaCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbkhpZ2hsaWdodCwgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgbmV3IEFuaW1hdGlvbkhpZ2hsaWdodCh7IGVsZW1lbnQgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUF1ZGlvKCkge1xyXG4gICAgICAgIHRoaXMuc2lkZUF1ZGlvID0gbmV3IEF1ZGlvKCcvQXVkaW8vbWl4a2l0LWludGVyZmFjZS1oaW50LW5vdGlmaWNhdGlvbi05MTEud2F2JylcclxuICAgICAgICB0aGlzLnNpZGVBdWRpby52b2x1bWUgPSAxXHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5sb2FkU2NyZWVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNpZGVBdWRpby5wbGF5KClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUFzeW5jTG9hZCgpIHtcclxuICAgICAgICBlYWNoKHRoaXMuZWxlbWVudHMucHJlbG9hZGVycywgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgbmV3IEFzeW5jTG9hZCh7IGVsZW1lbnQ6IGVsZW1lbnQudGFyZ2V0ID8gZWxlbWVudC50YXJnZXQgOiBlbGVtZW50IH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk91dCA9IEdTQVAudGltZWxpbmUoKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25PdXQuc2V0KHRoaXMuZWxlbWVudHMubG9hZFNjcmVlbiwge1xyXG4gICAgICAgICAgICAgICAgbGVmdDogJy0yMDAlJyxcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uT3V0LmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkluID0gR1NBUC50aW1lbGluZSgpXHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSW4uc2V0KHRoaXMuZWxlbWVudHMubG9hZFNjcmVlbiwge1xyXG4gICAgICAgICAgICAgICAgYXV0b0FscGhhOiAxLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkluLnNldCh0aGlzLmVsZW1lbnRzLmxvYWRTY3JlZW5JbWcsIHtcclxuICAgICAgICAgICAgICAgIGF1dG9BbHBoYTogMSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25Jbi50byh0aGlzLmVsZW1lbnRzLmxvYWRTY3JlZW4sIHtcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgIGxlZnQ6ICcwJScsXHJcbiAgICAgICAgICAgICAgICBlYXNlOiAnRXhwby5lYXNlSW5PdXQnLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkluLnRvKHRoaXMuZWxlbWVudHMubG9hZFNjcmVlbiwge1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDIsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgZWFzZTogJ0V4cG8uZWFzZUluT3V0JyxcclxuICAgICAgICAgICAgICAgIC8vIGRlbGF5OiAsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2l6ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cz8ud3JhcHBlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbC5saW1pdCA9IHRoaXMuZWxlbWVudHMud3JhcHBlci5jbGllbnRIZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TY3JvbGwoZSkge1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCArPSBlLnBpeGVsWVxyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbC50YXJnZXQgJSA4MDAgPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNpZGVBdWRpby5wbGF5KClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZW1vdmUoZSkge1xyXG4gICAgICAgIHRoaXMubW91c2UueCA9IChlLmNsaWVudFggLSB3aW5kb3cuaW5uZXJXaWR0aCkgKiAwLjAxICsgNVxyXG4gICAgICAgIHRoaXMubW91c2UueSA9IChlLmNsaWVudFkgLSB3aW5kb3cuaW5uZXJIZWlnaHQpICogMC4wMSArIDVcclxuICAgIH1cclxuXHJcbiAgICBvblRvdWNoU3RhcnQoZSkge1xyXG4gICAgICAgIHRoaXMueS5zdGFydCA9IGUudG91Y2hlc1swXS5jbGllbnRZXHJcbiAgICB9XHJcblxyXG4gICAgb25Ub3VjaE1vdmUoZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnkuc3RhcnQgPiBlLnRvdWNoZXNbMF0uY2xpZW50WSkge1xyXG4gICAgICAgICAgICB0aGlzLnkuZGlzdGFuY2UgKz0gNTBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnkuZGlzdGFuY2UgLT0gMTAwXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uVG91Y2hFbmQoZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGUudG91Y2hlcylcclxuICAgICAgICAvLyB0aGlzLnkuZW5kICs9IGUudG91Y2hlc1swXS5jbGllbnRZXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2Nyb2xsLnRhcmdldClcclxuICAgICAgICBpZiAoRGV0ZWN0aW9uTWFuYWdlci5pc0Rlc2t0b3AoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgPSBHU0FQLnV0aWxzLmNsYW1wKDAsIHRoaXMuc2Nyb2xsLmxpbWl0LCB0aGlzLnNjcm9sbC50YXJnZXQpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gR1NBUC51dGlscy5jbGFtcCgwLCB0aGlzLnNjcm9sbC5saW1pdCwgdGhpcy55LmRpc3RhbmNlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPCAwLjAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSAwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy55LmRpc3RhbmNlIDwgMC4wMSkge1xyXG4gICAgICAgICAgICB0aGlzLnkuZGlzdGFuY2UgPSAwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNjcm9sbC50YXJnZXQsIDAuMDEpXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzPy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5zdHlsZVtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtUHJlZml4XHJcbiAgICAgICAgICAgIF0gPSBgdHJhbnNsYXRlM2QoMHB4LC0ke3RoaXMuc2Nyb2xsLmN1cnJlbnR9cHgsIDBweClgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cz8uYmFyKSB7XHJcbiAgICAgICAgICAgIGVhY2godGhpcy5lbGVtZW50cy5iYXIsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3RoaXMuc2Nyb2xsLmN1cnJlbnR9cHgpYFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMucG9pbnRzKSB7XHJcbiAgICAgICAgICAgIGVhY2godGhpcy5lbGVtZW50cy5wb2ludHMsIChwb2ludCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvaW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dGhpcy5tb3VzZS54ICogKGluZGV4ICsgMSl9cHgpIHRyYW5zbGF0ZVkoJHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdXNlLnkgKiAoaW5kZXggKyAxKVxyXG4gICAgICAgICAgICAgICAgfXB4KWBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcigpIHt9XHJcbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHt9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcclxuICAgIH1cclxufVxyXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI3OTkzNTViNjhmZmI5YWNkZWRkMlwiKSJdLCJuYW1lcyI6WyJQYWdlIiwiY29uc3RydWN0b3IiLCJlbGVtZW50IiwiaWQiLCJlbGVtZW50cyIsInRoaXMiLCJzZWxlY3RvciIsInNlbGVjdG9yQ2hpbGRyZW4iLCJsb2FkU2NyZWVuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibG9hZFNjcmVlbkltZyIsImFuaW1hdGlvblRpdGxlcyIsImFuaW1hdGlvblBhcmFncmFwaCIsImFuaW1hdGlvbkhpZ2hsaWdodCIsInByZWxvYWRlcnMiLCJzY3JvbGwiLCJjdXJyZW50IiwidGFyZ2V0IiwibGltaXQiLCJtb3VzZSIsIngiLCJ5Iiwic3RhcnQiLCJkaXN0YW5jZSIsImVuZCIsInRyYW5zZm9ybVByZWZpeCIsIlByZWZpeCIsImNyZWF0ZSIsImVhY2giLCJrZXkiLCJ3aW5kb3ciLCJIVE1MRWxlbWVudCIsIk5vZGVMaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsIndyYXBwZXIiLCJjbGllbnRIZWlnaHQiLCJpbm5lckhlaWdodCIsImNyZWF0ZUFuaW1hdGlvbiIsImNyZWF0ZUF1ZGlvIiwiY3JlYXRlQXN5bmNMb2FkIiwiY3JlYXRlUG9pbnRzIiwiY3JlYXRlU2Nyb2xsR3NhcCIsInBsYXlIYW5kbGUiLCJBbmltYXRpb25UaXRsZSIsIkFuaW1hdGlvblBhcmFncmFwaCIsIkFuaW1hdGlvbkhpZ2hsaWdodCIsInNpZGVBdWRpbyIsIkF1ZGlvIiwidm9sdW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXkiLCJBc3luY0xvYWQiLCJzaG93IiwiUHJvbWlzZSIsInJlc29sdmUiLCJhbmltYXRpb25PdXQiLCJHU0FQIiwic2V0IiwibGVmdCIsImNhbGwiLCJoaWRlIiwiYW5pbWF0aW9uSW4iLCJhdXRvQWxwaGEiLCJ0byIsImR1cmF0aW9uIiwid2lkdGgiLCJlYXNlIiwib25SZXNpemUiLCJvblNjcm9sbCIsImUiLCJwaXhlbFkiLCJvbk1vdXNlbW92ZSIsImNsaWVudFgiLCJpbm5lcldpZHRoIiwiY2xpZW50WSIsIm9uVG91Y2hTdGFydCIsInRvdWNoZXMiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJ1cGRhdGUiLCJjb25zb2xlIiwibG9nIiwiRGV0ZWN0aW9uTWFuYWdlciIsInN0eWxlIiwiYmFyIiwidHJhbnNmb3JtIiwicG9pbnRzIiwicG9pbnQiLCJpbmRleCIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwiZGVzdHJveSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==