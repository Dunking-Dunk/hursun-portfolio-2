/*! For license information please see main.ff214f42c013fb711169.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateportfolio_hursun_2("main",{"./app/classes/Page.js":(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var s=i("./node_modules/lodash/each.js"),n=i("./node_modules/gsap/index.js"),a=i("./node_modules/prefix/index.js"),l=i("./app/classes/AsyncLoad.js"),r=i("./app/animations/Title.js"),o=i("./app/animations/Paragraph.js"),h=i("./app/animations/Highlight.js"),m=i("./app/animations/Cursor.js"),c=i("./app/classes/Detection.js");class d{constructor({element:e,id:t,elements:i}){this.selector=e,this.selectorChildren={...i,loadScreen:document.querySelector(".load__screen"),loadScreenImg:document.querySelector(".load__screen__img"),animationTitles:'[data-animation="title"]',animationParagraph:'[data-animation="paragraph"]',animationHighlight:'[data-animation="highlight"]',animationCursor:'[data-animation="cursor"]',preloaders:"[data-src]"},this.id=t,this.scroll={current:0,target:0,limit:0},this.mouse={x:0,y:0},this.y={start:0,distance:0,end:0},this.transformPrefix=a("transform")}create(){this.element=document.querySelector(this.selector),this.elements={},s(this.selectorChildren,((e,t)=>{e instanceof window.HTMLElement||e instanceof window.NodeList||Array.isArray(e)?this.elements[t]=e:(this.elements[t]=this.element.querySelectorAll(e),0===this.elements[t].length?this.elements[t]=null:1===this.elements[t].length&&(this.elements[t]=this.element.querySelector(e)))})),this.elements.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight),this.createAnimation(),this.createAudio(),this.createAsyncLoad(),"home"===this.id&&this.createPoints(),"gallery"===this.id&&this.createScrollGsap(),"spotify"===this.id&&this.playHandle()}createAnimation(){s(this.elements.animationTitles,(e=>{new r.default({element:e})})),s(this.elements.animationParagraph,(e=>{new o.default({element:e})})),s(this.elements.animationHighlight,(e=>{new h.default({element:e})})),s(this.elements.animationCursor,(e=>{new m.default({element:e})}))}createAudio(){this.sideAudio=new Audio("/Audio/mixkit-interface-hint-notification-911.wav"),this.sideAudio.volume=1,this.elements.loadScreen.addEventListener("click",(()=>{this.sideAudio.play()}))}createAsyncLoad(){s(this.elements.preloaders,(e=>{new l.default({element:e.target?e.target:e})}))}show(){return new Promise((e=>{this.animationOut=n.default.timeline(),this.animationOut.set(this.elements.loadScreen,{left:"-200%"}),this.animationOut.call((()=>{e()}))}))}hide(){return new Promise((e=>{this.animationIn=n.default.timeline(),this.animationIn.set(this.elements.loadScreen,{autoAlpha:1}),this.animationIn.set(this.elements.loadScreenImg,{autoAlpha:1}),this.animationIn.to(this.elements.loadScreen,{duration:1,width:"100%",left:"0%",ease:"Expo.easeInOut"}),this.animationIn.to(this.elements.loadScreen,{duration:2,width:"100%",left:"100%",ease:"Expo.easeInOut"})}))}onResize(){this.elements?.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight)}onScroll(e){this.scroll.target+=e.pixelY,this.scroll.target%800==0&&this.sideAudio.play()}onMousemove(e){this.mouse.x=.01*(e.clientX-window.innerWidth)+5,this.mouse.y=.01*(e.clientY-window.innerHeight)+5}onTouchStart(e){this.y.start=e.touches[0].clientY}onTouchMove(e){this.y.start>e.touches[0].clientY?this.y.distance+=50:this.y.distance-=100}onTouchEnd(e){}update(){c.default.isDesktop()?this.scroll.target=n.default.utils.clamp(0,this.scroll.limit,this.scroll.target):this.scroll.target=n.default.utils.clamp(0,this.scroll.limit,this.y.distance),this.scroll.current<.01&&(this.scroll.current=0),this.y.distance<.01&&(this.y.distance=0),this.scroll.current=n.default.utils.interpolate(this.scroll.current,this.scroll.target,.01),this.elements?.wrapper&&(this.elements.wrapper.style[this.transformPrefix]=`translate3d(0px,-${this.scroll.current}px, 0px)`),this.elements?.bar&&s(this.elements.bar,(e=>{e.style.transform=`translateX(-${this.scroll.current}px)`})),this.elements.points&&s(this.elements.points,((e,t)=>{e.style.transform=`translateX(${this.mouse.x*(t+1)}px) translateY(${this.mouse.y*(t+1)}px)`}))}addEventListener(){}removeEventListeners(){}destroy(){this.removeEventListeners()}}}},(function(e){e.h=()=>"a12b9f4b59454902fc96"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vcG9ydGZvbGlvLWh1cnN1bi0yL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZWFjaCBmcm9tICdsb2Rhc2gvZWFjaC5qcydcclxuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcclxuaW1wb3J0IFByZWZpeCBmcm9tICdwcmVmaXgnXHJcblxyXG5pbXBvcnQgQXN5bmNMb2FkIGZyb20gJy4vQXN5bmNMb2FkLmpzJ1xyXG5pbXBvcnQgQW5pbWF0aW9uVGl0bGUgZnJvbSAnLi4vYW5pbWF0aW9ucy9UaXRsZS5qcydcclxuaW1wb3J0IEFuaW1hdGlvblBhcmFncmFwaCBmcm9tICcuLi9hbmltYXRpb25zL1BhcmFncmFwaC5qcydcclxuaW1wb3J0IEFuaW1hdGlvbkhpZ2hsaWdodCBmcm9tICcuLi9hbmltYXRpb25zL0hpZ2hsaWdodC5qcydcclxuaW1wb3J0IEN1cnNvckFuaW1hdGlvbiBmcm9tICcuLi9hbmltYXRpb25zL0N1cnNvci5qcydcclxuaW1wb3J0IERldGVjdGlvbk1hbmFnZXIgZnJvbSAnLi4vY2xhc3Nlcy9EZXRlY3Rpb24uanMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgZWxlbWVudCwgaWQsIGVsZW1lbnRzIH0pIHtcclxuICAgICAgICB0aGlzLnNlbGVjdG9yID0gZWxlbWVudFxyXG4gICAgICAgIHRoaXMuc2VsZWN0b3JDaGlsZHJlbiA9IHtcclxuICAgICAgICAgICAgLi4uZWxlbWVudHMsXHJcbiAgICAgICAgICAgIGxvYWRTY3JlZW46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkX19zY3JlZW4nKSxcclxuICAgICAgICAgICAgbG9hZFNjcmVlbkltZzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRfX3NjcmVlbl9faW1nJyksXHJcbiAgICAgICAgICAgIGFuaW1hdGlvblRpdGxlczogJ1tkYXRhLWFuaW1hdGlvbj1cInRpdGxlXCJdJyxcclxuICAgICAgICAgICAgYW5pbWF0aW9uUGFyYWdyYXBoOiAnW2RhdGEtYW5pbWF0aW9uPVwicGFyYWdyYXBoXCJdJyxcclxuICAgICAgICAgICAgYW5pbWF0aW9uSGlnaGxpZ2h0OiAnW2RhdGEtYW5pbWF0aW9uPVwiaGlnaGxpZ2h0XCJdJyxcclxuICAgICAgICAgICAgYW5pbWF0aW9uQ3Vyc29yOiAnW2RhdGEtYW5pbWF0aW9uPVwiY3Vyc29yXCJdJyxcclxuICAgICAgICAgICAgcHJlbG9hZGVyczogJ1tkYXRhLXNyY10nLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkID0gaWRcclxuICAgICAgICB0aGlzLnNjcm9sbCA9IHtcclxuICAgICAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICAgICAgdGFyZ2V0OiAwLFxyXG4gICAgICAgICAgICBsaW1pdDogMCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubW91c2UgPSB7XHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnkgPSB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxyXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgZW5kOiAwLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1QcmVmaXggPSBQcmVmaXgoJ3RyYW5zZm9ybScpXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZWxlY3RvcilcclxuICAgICAgICB0aGlzLmVsZW1lbnRzID0ge31cclxuXHJcbiAgICAgICAgZWFjaCh0aGlzLnNlbGVjdG9yQ2hpbGRyZW4sIChzZWxlY3Rvciwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yIGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50IHx8XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvciBpbnN0YW5jZW9mIHdpbmRvdy5Ob2RlTGlzdCB8fFxyXG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShzZWxlY3RvcilcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSBzZWxlY3RvclxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1trZXldID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50c1trZXldLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNba2V5XSA9IG51bGxcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50c1trZXldLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNba2V5XSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLmxpbWl0ID0gdGhpcy5lbGVtZW50cy53cmFwcGVyLmNsaWVudEhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVBbmltYXRpb24oKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQXVkaW8oKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQXN5bmNMb2FkKClcclxuICAgICAgICBpZiAodGhpcy5pZCA9PT0gJ2hvbWUnKSB0aGlzLmNyZWF0ZVBvaW50cygpXHJcbiAgICAgICAgaWYgKHRoaXMuaWQgPT09ICdnYWxsZXJ5JykgdGhpcy5jcmVhdGVTY3JvbGxHc2FwKClcclxuICAgICAgICBpZiAodGhpcy5pZCA9PT0gJ3Nwb3RpZnknKSB0aGlzLnBsYXlIYW5kbGUoKVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUFuaW1hdGlvbigpIHtcclxuICAgICAgICBlYWNoKHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uVGl0bGVzLCAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgQW5pbWF0aW9uVGl0bGUoeyBlbGVtZW50IH0pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZWFjaCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvblBhcmFncmFwaCwgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgbmV3IEFuaW1hdGlvblBhcmFncmFwaCh7IGVsZW1lbnQgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBlYWNoKHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uSGlnaGxpZ2h0LCAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgQW5pbWF0aW9uSGlnaGxpZ2h0KHsgZWxlbWVudCB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGVhY2godGhpcy5lbGVtZW50cy5hbmltYXRpb25DdXJzb3IsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBDdXJzb3JBbmltYXRpb24oeyBlbGVtZW50IH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVBdWRpbygpIHtcclxuICAgICAgICB0aGlzLnNpZGVBdWRpbyA9IG5ldyBBdWRpbygnL0F1ZGlvL21peGtpdC1pbnRlcmZhY2UtaGludC1ub3RpZmljYXRpb24tOTExLndhdicpXHJcbiAgICAgICAgdGhpcy5zaWRlQXVkaW8udm9sdW1lID0gMVxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMubG9hZFNjcmVlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zaWRlQXVkaW8ucGxheSgpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVBc3luY0xvYWQoKSB7XHJcbiAgICAgICAgZWFjaCh0aGlzLmVsZW1lbnRzLnByZWxvYWRlcnMsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBBc3luY0xvYWQoeyBlbGVtZW50OiBlbGVtZW50LnRhcmdldCA/IGVsZW1lbnQudGFyZ2V0IDogZWxlbWVudCB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25PdXQgPSBHU0FQLnRpbWVsaW5lKClcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uT3V0LnNldCh0aGlzLmVsZW1lbnRzLmxvYWRTY3JlZW4sIHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6ICctMjAwJScsXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk91dC5jYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25JbiA9IEdTQVAudGltZWxpbmUoKVxyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkluLnNldCh0aGlzLmVsZW1lbnRzLmxvYWRTY3JlZW4sIHtcclxuICAgICAgICAgICAgICAgIGF1dG9BbHBoYTogMSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25Jbi5zZXQodGhpcy5lbGVtZW50cy5sb2FkU2NyZWVuSW1nLCB7XHJcbiAgICAgICAgICAgICAgICBhdXRvQWxwaGE6IDEsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uSW4udG8odGhpcy5lbGVtZW50cy5sb2FkU2NyZWVuLCB7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAnMCUnLFxyXG4gICAgICAgICAgICAgICAgZWFzZTogJ0V4cG8uZWFzZUluT3V0JyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25Jbi50byh0aGlzLmVsZW1lbnRzLmxvYWRTY3JlZW4sIHtcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgIGxlZnQ6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgIGVhc2U6ICdFeHBvLmVhc2VJbk91dCcsXHJcbiAgICAgICAgICAgICAgICAvLyBkZWxheTogLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHM/LndyYXBwZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwubGltaXQgPSB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2Nyb2xsKGUpIHtcclxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgKz0gZS5waXhlbFlcclxuICAgICAgICBpZiAodGhpcy5zY3JvbGwudGFyZ2V0ICUgODAwID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zaWRlQXVkaW8ucGxheSgpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2Vtb3ZlKGUpIHtcclxuICAgICAgICB0aGlzLm1vdXNlLnggPSAoZS5jbGllbnRYIC0gd2luZG93LmlubmVyV2lkdGgpICogMC4wMSArIDVcclxuICAgICAgICB0aGlzLm1vdXNlLnkgPSAoZS5jbGllbnRZIC0gd2luZG93LmlubmVySGVpZ2h0KSAqIDAuMDEgKyA1XHJcbiAgICB9XHJcblxyXG4gICAgb25Ub3VjaFN0YXJ0KGUpIHtcclxuICAgICAgICB0aGlzLnkuc3RhcnQgPSBlLnRvdWNoZXNbMF0uY2xpZW50WVxyXG4gICAgfVxyXG5cclxuICAgIG9uVG91Y2hNb3ZlKGUpIHtcclxuICAgICAgICBpZiAodGhpcy55LnN0YXJ0ID4gZS50b3VjaGVzWzBdLmNsaWVudFkpIHtcclxuICAgICAgICAgICAgdGhpcy55LmRpc3RhbmNlICs9IDUwXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy55LmRpc3RhbmNlIC09IDEwMFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblRvdWNoRW5kKGUpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlLnRvdWNoZXMpXHJcbiAgICAgICAgLy8gdGhpcy55LmVuZCArPSBlLnRvdWNoZXNbMF0uY2xpZW50WVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAoRGV0ZWN0aW9uTWFuYWdlci5pc0Rlc2t0b3AoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgPSBHU0FQLnV0aWxzLmNsYW1wKDAsIHRoaXMuc2Nyb2xsLmxpbWl0LCB0aGlzLnNjcm9sbC50YXJnZXQpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gR1NBUC51dGlscy5jbGFtcCgwLCB0aGlzLnNjcm9sbC5saW1pdCwgdGhpcy55LmRpc3RhbmNlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPCAwLjAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSAwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy55LmRpc3RhbmNlIDwgMC4wMSkge1xyXG4gICAgICAgICAgICB0aGlzLnkuZGlzdGFuY2UgPSAwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNjcm9sbC50YXJnZXQsIDAuMDEpXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzPy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMud3JhcHBlci5zdHlsZVtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtUHJlZml4XHJcbiAgICAgICAgICAgIF0gPSBgdHJhbnNsYXRlM2QoMHB4LC0ke3RoaXMuc2Nyb2xsLmN1cnJlbnR9cHgsIDBweClgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cz8uYmFyKSB7XHJcbiAgICAgICAgICAgIGVhY2godGhpcy5lbGVtZW50cy5iYXIsIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3RoaXMuc2Nyb2xsLmN1cnJlbnR9cHgpYFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMucG9pbnRzKSB7XHJcbiAgICAgICAgICAgIGVhY2godGhpcy5lbGVtZW50cy5wb2ludHMsIChwb2ludCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvaW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7dGhpcy5tb3VzZS54ICogKGluZGV4ICsgMSl9cHgpIHRyYW5zbGF0ZVkoJHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdXNlLnkgKiAoaW5kZXggKyAxKVxyXG4gICAgICAgICAgICAgICAgfXB4KWBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcigpIHt9XHJcbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHt9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcclxuICAgIH1cclxufVxyXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJhMTJiOWY0YjU5NDU0OTAyZmM5NlwiKSJdLCJuYW1lcyI6WyJQYWdlIiwiY29uc3RydWN0b3IiLCJlbGVtZW50IiwiaWQiLCJlbGVtZW50cyIsInRoaXMiLCJzZWxlY3RvciIsInNlbGVjdG9yQ2hpbGRyZW4iLCJsb2FkU2NyZWVuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibG9hZFNjcmVlbkltZyIsImFuaW1hdGlvblRpdGxlcyIsImFuaW1hdGlvblBhcmFncmFwaCIsImFuaW1hdGlvbkhpZ2hsaWdodCIsImFuaW1hdGlvbkN1cnNvciIsInByZWxvYWRlcnMiLCJzY3JvbGwiLCJjdXJyZW50IiwidGFyZ2V0IiwibGltaXQiLCJtb3VzZSIsIngiLCJ5Iiwic3RhcnQiLCJkaXN0YW5jZSIsImVuZCIsInRyYW5zZm9ybVByZWZpeCIsIlByZWZpeCIsImNyZWF0ZSIsImVhY2giLCJrZXkiLCJ3aW5kb3ciLCJIVE1MRWxlbWVudCIsIk5vZGVMaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsIndyYXBwZXIiLCJjbGllbnRIZWlnaHQiLCJpbm5lckhlaWdodCIsImNyZWF0ZUFuaW1hdGlvbiIsImNyZWF0ZUF1ZGlvIiwiY3JlYXRlQXN5bmNMb2FkIiwiY3JlYXRlUG9pbnRzIiwiY3JlYXRlU2Nyb2xsR3NhcCIsInBsYXlIYW5kbGUiLCJBbmltYXRpb25UaXRsZSIsIkFuaW1hdGlvblBhcmFncmFwaCIsIkFuaW1hdGlvbkhpZ2hsaWdodCIsIkN1cnNvckFuaW1hdGlvbiIsInNpZGVBdWRpbyIsIkF1ZGlvIiwidm9sdW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBsYXkiLCJBc3luY0xvYWQiLCJzaG93IiwiUHJvbWlzZSIsInJlc29sdmUiLCJhbmltYXRpb25PdXQiLCJHU0FQIiwic2V0IiwibGVmdCIsImNhbGwiLCJoaWRlIiwiYW5pbWF0aW9uSW4iLCJhdXRvQWxwaGEiLCJ0byIsImR1cmF0aW9uIiwid2lkdGgiLCJlYXNlIiwib25SZXNpemUiLCJvblNjcm9sbCIsImUiLCJwaXhlbFkiLCJvbk1vdXNlbW92ZSIsImNsaWVudFgiLCJpbm5lcldpZHRoIiwiY2xpZW50WSIsIm9uVG91Y2hTdGFydCIsInRvdWNoZXMiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJ1cGRhdGUiLCJEZXRlY3Rpb25NYW5hZ2VyIiwic3R5bGUiLCJiYXIiLCJ0cmFuc2Zvcm0iLCJwb2ludHMiLCJwb2ludCIsImluZGV4IiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJkZXN0cm95IiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9