/*! For license information please see main.015f77f74aeaf5566923.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateportfolio_hursun_2("main",{"./app/components/canvas/home/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s("./node_modules/three/build/three.module.js"),a=s("./node_modules/gsap/index.js"),r=s("./app/classes/Detection.js"),l=s("./node_modules/prefix/index.js"),o=s("./app/shaders/human/vertex.glsl"),c=s("./app/shaders/human/fragment.glsl"),n=s("./app/shaders/particle/vertex.glsl"),h=s("./app/shaders/particle/fragment.glsl");class d{constructor({scene:e,gltfLoader:t,camera:s,renderer:a}){this.scene=e,this.gltfLoader=t,this.camera=s,this.renderer=a,this.uniforms={time:{value:0},speed:{value:10},charSize:{value:{x:1,y:1}},charResolution:{value:10},color:{value:new i.Color("#D2001A")},resolution:{value:{x:2,y:2}}},this.scroll={target:0,current:0,limit:6e3},this.y={start:0,distance:0,end:0},this.transformPrefix=l("transform"),this.group=new i.Group,this.scene.add(this.group),this.createObject(),this.createParticle()}updateAllMaterial(){this.scene.traverse((e=>{e instanceof i.Mesh&&e.material instanceof i.MeshStandardMaterial&&(e.material.needsUpdate=!0)}))}createObject(){this.cube=new i.Mesh(new i.BoxGeometry(1,1,1),new i.MeshBasicMaterial),this.cube.position.set(0,-18,0),this.material=new i.RawShaderMaterial({vertexShader:o.default,fragmentShader:c.default,uniforms:this.uniforms}),this.gltfLoader.load("models/human/scene.gltf",(e=>{this.model=e.scene,this.model.children[0].children[0].children.forEach((e=>{e.material=this.material})),this.model.position.y=-16,this.group.add(this.model),this.updateAllMaterial()}))}createParticle(){const e=new Float32Array(3e4);for(let t=0;t<1e4;t++){const s=3*t;e[s]=100*(Math.random()-.5),e[s+1]=100*Math.random(),e[s+2]=100*(Math.random()-.5)}const t=new i.BufferGeometry;t.setAttribute("position",new i.BufferAttribute(e,3)),this.particleMaterial=new i.RawShaderMaterial({fragmentShader:h.default,vertexShader:n.default,depthWrite:!1,blending:i.AdditiveBlending,uniforms:{uTime:{value:0},uSize:{value:10*this.renderer.getPixelRatio()}}}),this.particle=new i.Points(t,this.particleMaterial),this.particle.position.y=-35,this.group.add(this.particle)}onScroll({pixelY:e}){this.scroll.target+=e}onTouchStart(e){this.y.start=e.touches[0].clientY}onTouchMove(e){this.y.start>e.touches[0].clientY?this.y.distance+=100:this.y.distance-=100}update(e){r.default.isDesktop()?this.scroll.target=a.default.utils.clamp(0,this.scroll.limit,this.scroll.target):this.scroll.target=a.default.utils.clamp(0,this.scroll.limit,this.y.distance),this.scroll.target<1&&(this.scroll.target=0),this.y.distance<.01&&(this.y.distance=0),console.log(this.scroll.limit,this.scroll.current),this.scroll.current=a.default.utils.interpolate(this.scroll.current,this.scroll.target,.01),this.head&&(this.head.rotation.y=e),this.particleMaterial&&(this.particleMaterial.uniforms.uTime.value=e),this.scroll.current<5400?(this.camera.rotation.x=3e-4*this.scroll.current,this.camera.rotation.y=.001*this.scroll.current,this.camera.position.z=5*Math.cos(.001*this.scroll.current),this.camera.position.y=1e-4*-this.scroll.current,this.camera.position.x=5*Math.sin(.001*this.scroll.current),document.querySelector(".home__end").classList.remove("active")):(a.default.to(this.camera.position,{x:0,y:-6,z:15,duration:6,ease:"expo.out"}),a.default.to(this.camera.rotation,{x:0,y:0,z:0,duration:1}),document.querySelector(".home__end").classList.add("active")),this.uniforms.time.value=e}destroy(){this.scene.remove(this.group)}}}},(function(e){e.h=()=>"147be76bcfc75acd43ea"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxRQUNyQ2QsS0FBS0YsT0FBTzBFLFNBQVNqRSxFQUEwQixLQUF0QlAsS0FBS1ksT0FBT0UsUUFDckNkLEtBQUtGLE9BQU9pQyxTQUFTMEMsRUFBNEMsRUFBeEM1QixLQUFLNkIsSUFBMEIsS0FBdEIxRSxLQUFLWSxPQUFPRSxTQUM5Q2QsS0FBS0YsT0FBT2lDLFNBQVN4QixFQUEyQixNQUF0QlAsS0FBS1ksT0FBT0UsUUFDdENkLEtBQUtGLE9BQU9pQyxTQUFTekIsRUFBNEMsRUFBeEN1QyxLQUFLOEIsSUFBMEIsS0FBdEIzRSxLQUFLWSxPQUFPRSxTQUM5QzhELFNBQVNDLGNBQWMsY0FBY0MsVUFBVUMsT0FBTyxZQUV0RFgsRUFBQUEsUUFBQUEsR0FBUXBFLEtBQUtGLE9BQU9pQyxTQUFVLENBQzFCekIsRUFBRyxFQUNIQyxHQUFJLEVBQ0prRSxFQUFHLEdBQ0hPLFNBQVUsRUFDVkMsS0FBTSxhQUVWYixFQUFBQSxRQUFBQSxHQUFRcEUsS0FBS0YsT0FBTzBFLFNBQVUsQ0FDMUJsRSxFQUFHLEVBQ0hDLEVBQUcsRUFDSGtFLEVBQUcsRUFDSE8sU0FBVSxJQUdkSixTQUFTQyxjQUFjLGNBQWNDLFVBQVV4RCxJQUFJLFdBR3ZEdEIsS0FBS0MsU0FBU0MsS0FBS0MsTUFBUStELENBQy9CLENBRUFnQixVQUNJbEYsS0FBS0osTUFBTW1GLE9BQU8vRSxLQUFLcUIsTUFDM0Isa0JDNUtKOEQsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby1odXJzdW4tMi8uL2FwcC9jb21wb25lbnRzL2NhbnZhcy9ob21lL2luZGV4LmpzIiwid2VicGFjazovL3BvcnRmb2xpby1odXJzdW4tMi93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnXHJcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXHJcbmltcG9ydCBEZXRlY3Rpb25NYW5hZ2VyIGZyb20gJy4uLy4uLy4uL2NsYXNzZXMvRGV0ZWN0aW9uLmpzJ1xyXG5pbXBvcnQgUHJlZml4IGZyb20gJ3ByZWZpeCdcclxuXHJcbmltcG9ydCB2ZXJ0ZXhTaGFkZXIgZnJvbSAnLi4vLi4vLi4vc2hhZGVycy9odW1hbi92ZXJ0ZXguZ2xzbCdcclxuaW1wb3J0IGZyYWdtZW50U2hhZGVyIGZyb20gJy4uLy4uLy4uL3NoYWRlcnMvaHVtYW4vZnJhZ21lbnQuZ2xzbCdcclxuXHJcbmltcG9ydCB2ZXJ0ZXhTaGFkZXJQYXJ0aWNsZSBmcm9tICcuLi8uLi8uLi9zaGFkZXJzL3BhcnRpY2xlL3ZlcnRleC5nbHNsJ1xyXG5pbXBvcnQgZnJhZ21lbnRTaGFkZXJQYXJ0aWNsZSBmcm9tICcuLi8uLi8uLi9zaGFkZXJzL3BhcnRpY2xlL2ZyYWdtZW50Lmdsc2wnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgc2NlbmUsIGdsdGZMb2FkZXIsIGNhbWVyYSwgcmVuZGVyZXIgfSkge1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxyXG4gICAgICAgIHRoaXMuZ2x0ZkxvYWRlciA9IGdsdGZMb2FkZXJcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlclxyXG5cclxuICAgICAgICB0aGlzLnVuaWZvcm1zID0ge1xyXG4gICAgICAgICAgICB0aW1lOiB7IHZhbHVlOiAwLjAgfSxcclxuICAgICAgICAgICAgc3BlZWQ6IHsgdmFsdWU6IDEwLjAgfSxcclxuICAgICAgICAgICAgY2hhclNpemU6IHsgdmFsdWU6IHsgeDogMS4wLCB5OiAxLjAgfSB9LFxyXG4gICAgICAgICAgICBjaGFyUmVzb2x1dGlvbjogeyB2YWx1ZTogMTAgfSxcclxuICAgICAgICAgICAgY29sb3I6IHsgdmFsdWU6IG5ldyBUSFJFRS5Db2xvcignI0QyMDAxQScpIH0sXHJcbiAgICAgICAgICAgIHJlc29sdXRpb246IHsgdmFsdWU6IHsgeDogMi4wLCB5OiAyLjAgfSB9LFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwgPSB7XHJcbiAgICAgICAgICAgIHRhcmdldDogMCxcclxuICAgICAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICAgICAgbGltaXQ6IDYwMDAsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnkgPSB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxyXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgZW5kOiAwLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRyYW5zZm9ybVByZWZpeCA9IFByZWZpeCgndHJhbnNmb3JtJylcclxuICAgICAgICB0aGlzLmdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKClcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmdyb3VwKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlT2JqZWN0KClcclxuICAgICAgICB0aGlzLmNyZWF0ZVBhcnRpY2xlKClcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVBbGxNYXRlcmlhbCgpIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnRyYXZlcnNlKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2ggJiZcclxuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWxcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlT2JqZWN0KCkge1xyXG4gICAgICAgIHRoaXMuY3ViZSA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxLCAxLCAxKSwgbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCkpXHJcbiAgICAgICAgdGhpcy5jdWJlLnBvc2l0aW9uLnNldCgwLCAtMTgsIDApXHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBUSFJFRS5SYXdTaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlcixcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXIsXHJcbiAgICAgICAgICAgIHVuaWZvcm1zOiB0aGlzLnVuaWZvcm1zLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5nbHRmTG9hZGVyLmxvYWQoJ21vZGVscy9odW1hbi9zY2VuZS5nbHRmJywgKGdsdGYpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IGdsdGYuc2NlbmVcclxuXHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnBvc2l0aW9uLnkgPSAtMTZcclxuICAgICAgICAgICAgdGhpcy5ncm91cC5hZGQodGhpcy5tb2RlbClcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxNYXRlcmlhbCgpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVQYXJ0aWNsZSgpIHtcclxuICAgICAgICBjb25zdCBjb3VudCA9IDEwMDAwXHJcbiAgICAgICAgY29uc3QgcmFkaXVzID0gMTAwXHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShjb3VudCAqIDMpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGkzID0gaSAqIDNcclxuICAgICAgICAgICAgcG9zaXRpb25zW2kzXSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHJhZGl1c1xyXG4gICAgICAgICAgICBwb3NpdGlvbnNbaTMgKyAxXSA9IE1hdGgucmFuZG9tKCkgKiByYWRpdXNcclxuICAgICAgICAgICAgcG9zaXRpb25zW2kzICsgMl0gPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiByYWRpdXNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KClcclxuICAgICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnMsIDMpKVxyXG5cclxuICAgICAgICB0aGlzLnBhcnRpY2xlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuUmF3U2hhZGVyTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICBmcmFnbWVudFNoYWRlcjogZnJhZ21lbnRTaGFkZXJQYXJ0aWNsZSxcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyOiB2ZXJ0ZXhTaGFkZXJQYXJ0aWNsZSxcclxuICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLFxyXG4gICAgICAgICAgICB1bmlmb3Jtczoge1xyXG4gICAgICAgICAgICAgICAgdVRpbWU6IHsgdmFsdWU6IDAgfSxcclxuICAgICAgICAgICAgICAgIHVTaXplOiB7IHZhbHVlOiAxMCAqIHRoaXMucmVuZGVyZXIuZ2V0UGl4ZWxSYXRpbygpIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZSA9IG5ldyBUSFJFRS5Qb2ludHMoZ2VvbWV0cnksIHRoaXMucGFydGljbGVNYXRlcmlhbClcclxuICAgICAgICB0aGlzLnBhcnRpY2xlLnBvc2l0aW9uLnkgPSAtMzVcclxuICAgICAgICB0aGlzLmdyb3VwLmFkZCh0aGlzLnBhcnRpY2xlKVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2Nyb2xsKHsgcGl4ZWxZIH0pIHtcclxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZXHJcbiAgICB9XHJcblxyXG4gICAgb25Ub3VjaFN0YXJ0KGUpIHtcclxuICAgICAgICB0aGlzLnkuc3RhcnQgPSBlLnRvdWNoZXNbMF0uY2xpZW50WVxyXG4gICAgfVxyXG5cclxuICAgIG9uVG91Y2hNb3ZlKGUpIHtcclxuICAgICAgICBpZiAodGhpcy55LnN0YXJ0ID4gZS50b3VjaGVzWzBdLmNsaWVudFkpIHtcclxuICAgICAgICAgICAgdGhpcy55LmRpc3RhbmNlICs9IDEwMFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMueS5kaXN0YW5jZSAtPSAxMDBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGVsYXBzZWRUaW1lKSB7XHJcbiAgICAgICAgaWYgKERldGVjdGlvbk1hbmFnZXIuaXNEZXNrdG9wKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gR1NBUC51dGlscy5jbGFtcCgwLCB0aGlzLnNjcm9sbC5saW1pdCwgdGhpcy5zY3JvbGwudGFyZ2V0KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoMCwgdGhpcy5zY3JvbGwubGltaXQsIHRoaXMueS5kaXN0YW5jZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbC50YXJnZXQgPCAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IDBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMueS5kaXN0YW5jZSA8IDAuMDEpIHtcclxuICAgICAgICAgICAgdGhpcy55LmRpc3RhbmNlID0gMFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNjcm9sbC5saW1pdCwgdGhpcy5zY3JvbGwuY3VycmVudClcclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5zY3JvbGwudGFyZ2V0LCAwLjAxKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5oZWFkKSB0aGlzLmhlYWQucm90YXRpb24ueSA9IGVsYXBzZWRUaW1lXHJcbiAgICAgICAgaWYgKHRoaXMucGFydGljbGVNYXRlcmlhbCkgdGhpcy5wYXJ0aWNsZU1hdGVyaWFsLnVuaWZvcm1zLnVUaW1lLnZhbHVlID0gZWxhcHNlZFRpbWVcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPCA1NDAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0aW9uLnggPSB0aGlzLnNjcm9sbC5jdXJyZW50ICogMC4wMDAzXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0aW9uLnkgPSB0aGlzLnNjcm9sbC5jdXJyZW50ICogMC4wMDFcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9IE1hdGguY29zKHRoaXMuc2Nyb2xsLmN1cnJlbnQgKiAwLjAwMSkgKiA1XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnkgPSAtdGhpcy5zY3JvbGwuY3VycmVudCAqIDAuMDAwMVxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi54ID0gTWF0aC5zaW4odGhpcy5zY3JvbGwuY3VycmVudCAqIDAuMDAxKSAqIDVcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2VuZCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgR1NBUC50byh0aGlzLmNhbWVyYS5wb3NpdGlvbiwge1xyXG4gICAgICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgICAgIHk6IC02LFxyXG4gICAgICAgICAgICAgICAgejogMTUsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNixcclxuICAgICAgICAgICAgICAgIGVhc2U6ICdleHBvLm91dCcsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIEdTQVAudG8odGhpcy5jYW1lcmEucm90YXRpb24sIHtcclxuICAgICAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICAgICAgejogMCxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxLFxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2VuZCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVuaWZvcm1zLnRpbWUudmFsdWUgPSBlbGFwc2VkVGltZVxyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5ncm91cClcclxuICAgIH1cclxufVxyXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCIxNDdiZTc2YmNmYzc1YWNkNDNlYVwiKSJdLCJuYW1lcyI6WyJIb21lIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsImdsdGZMb2FkZXIiLCJjYW1lcmEiLCJyZW5kZXJlciIsInRoaXMiLCJ1bmlmb3JtcyIsInRpbWUiLCJ2YWx1ZSIsInNwZWVkIiwiY2hhclNpemUiLCJ4IiwieSIsImNoYXJSZXNvbHV0aW9uIiwiY29sb3IiLCJUSFJFRSIsInJlc29sdXRpb24iLCJzY3JvbGwiLCJ0YXJnZXQiLCJjdXJyZW50IiwibGltaXQiLCJzdGFydCIsImRpc3RhbmNlIiwiZW5kIiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiZ3JvdXAiLCJhZGQiLCJjcmVhdGVPYmplY3QiLCJjcmVhdGVQYXJ0aWNsZSIsInVwZGF0ZUFsbE1hdGVyaWFsIiwidHJhdmVyc2UiLCJjaGlsZCIsIm1hdGVyaWFsIiwibmVlZHNVcGRhdGUiLCJjdWJlIiwicG9zaXRpb24iLCJzZXQiLCJ2ZXJ0ZXhTaGFkZXIiLCJmcmFnbWVudFNoYWRlciIsImxvYWQiLCJnbHRmIiwibW9kZWwiLCJjaGlsZHJlbiIsImZvckVhY2giLCJwb3NpdGlvbnMiLCJGbG9hdDMyQXJyYXkiLCJjb3VudCIsImkiLCJpMyIsIk1hdGgiLCJyYW5kb20iLCJnZW9tZXRyeSIsInNldEF0dHJpYnV0ZSIsInBhcnRpY2xlTWF0ZXJpYWwiLCJmcmFnbWVudFNoYWRlclBhcnRpY2xlIiwidmVydGV4U2hhZGVyUGFydGljbGUiLCJkZXB0aFdyaXRlIiwiYmxlbmRpbmciLCJ1VGltZSIsInVTaXplIiwiZ2V0UGl4ZWxSYXRpbyIsInBhcnRpY2xlIiwib25TY3JvbGwiLCJwaXhlbFkiLCJvblRvdWNoU3RhcnQiLCJlIiwidG91Y2hlcyIsImNsaWVudFkiLCJvblRvdWNoTW92ZSIsInVwZGF0ZSIsImVsYXBzZWRUaW1lIiwiRGV0ZWN0aW9uTWFuYWdlciIsIkdTQVAiLCJjb25zb2xlIiwibG9nIiwiaGVhZCIsInJvdGF0aW9uIiwieiIsImNvcyIsInNpbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImR1cmF0aW9uIiwiZWFzZSIsImRlc3Ryb3kiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=